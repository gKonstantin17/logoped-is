<!-- lesson-modal.component.html -->
<div class="modal-overlay">
  <div class="modal-content">
    <div class="modal-header">
      <button class="close-btn" (click)="cancel()">×</button>
    </div>

    <div *ngIf="step === 1">
      <h2>Выберите тип записи</h2>

      <!-- Если нет речевой карты -->
      <button
        *ngIf="hasSpeechCard === false"
        class="modal-step1-btn"
        (click)="proceedToStep2('diagnostic')">
        Записаться на диагностику
      </button>

      <!-- Если есть -->
      <button
        *ngIf="hasSpeechCard === true"
        class="modal-step1-btn"
        (click)="proceedToStep2('lesson')">
        Записаться на занятие
      </button>

      <!-- Пока идёт проверка -->
      <p *ngIf="hasSpeechCard === null">Проверка данных...</p>
    </div>

    <div *ngIf="step === 2">
      <h2>Выберите дату и время</h2>
      <input
        type="date"
        [(ngModel)]="selectedDate"
        [min]="minDate"
        (ngModelChange)="onDateChange($event)" />

      <div class="time-slots">
        <button
          *ngFor="let slot of allTimeSlots"
          [disabled]="!availableTimeSlots.includes(slot)"
          [class.selected]="selectedTime === slot"
          (click)="selectedTime = slot">
          {{ slot }}
        </button>
      </div>
      <button class="modal-step1-btn"
              *ngIf="choice === 'lesson' && currentRole === 'logoped'"
              (click)="proceedToStep3()">
        Далее
      </button>
      <button class="modal-step1-btn"
              *ngIf="choice === 'diagnostic'|| currentRole === 'user'" [disabled]="!selectedDate || !selectedTime"
              (click)="submit()">
        Записаться
      </button>
    </div>

    <!-- Шаг 3: Ввод данных для занятия -->
    <div *ngIf="step === 3">
      <h2>Введите данные занятия</h2>

      <label>Тип занятия:</label>
      <select [(ngModel)]="lessonType" required>
        <option value="Коррекция звукопроизношения">Коррекция звукопроизношения</option>
        <option value="Коррекция лексико-грамматических нарушений">Коррекция лексико-грамматических нарушений</option>
        <option value="Формирование связной речи">Формирование связной речи</option>
        <option value="Фонетико-фонематические нарушения">Фонетико-фонематические нарушения</option>
        <option value="Логопедический массаж">Логопедический массаж</option>
      </select>

      <label>Тема:</label>
      <input type="text" [(ngModel)]="topic">

      <label>Описание:</label>
      <textarea [(ngModel)]="description"></textarea>

      <label>Домашнее задание:</label>
      <input type="text" [(ngModel)]="homework">

      <button
        class="modal-submit-btn"
        [disabled]="!lessonType"
        (click)="submit()">
        Сохранить
      </button>
    </div>



  </div>
</div>
